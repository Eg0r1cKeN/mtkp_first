import logging
from telegram import InlineKeyboardButton, InlineKeyboardMarkup, Update
from telegram.ext import Application, CommandHandler, CallbackQueryHandler, ContextTypes
import os

logging.basicConfig(
    format="%(asctime)s - %(name)s - %(levelname)s - %(message)s", level=logging.INFO
)
logger = logging.getLogger(__name__)

IMAGES_FOLDER = "images"

QA_DATA = {
    "q1": {
        "question": "1. Ð§Ñ‚Ð¾ Ñ‚Ð°ÐºÐ¾Ðµ Â«Ð”Ð²Ð¸Ð¶ÐµÐ½Ð¸Ðµ Ð¿ÐµÑ€Ð²Ñ‹Ñ…Â»? Ð§ÐµÐ¼ Ð¾Ð½Ð¾ Ð¾Ñ‚Ð»Ð¸Ñ‡Ð°ÐµÑ‚ÑÑ Ð¾Ñ‚ Ð´Ñ€ÑƒÐ³Ð¸Ñ… Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ†Ð¸Ð¹?",
        "answer": '"Ð”Ð²Ð¸Ð¶ÐµÐ½Ð¸Ðµ Ð¿ÐµÑ€Ð²Ñ‹Ñ…" â€” ÑÑ‚Ð¾ Ð²ÑÐµÑ€Ð¾ÑÑÐ¸Ð¹ÑÐºÐ¾Ðµ Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ðµ Ð´ÐµÑ‚ÐµÐ¹ Ð¸ Ð¼Ð¾Ð»Ð¾Ð´ÐµÐ¶Ð¸. ÐžÑ‚Ð»Ð¸Ñ‡Ð°ÐµÑ‚ÑÑ Ñ‚ÐµÐ¼, Ñ‡Ñ‚Ð¾ Ð¾Ð±ÑŠÐµÐ´Ð¸Ð½ÑÐµÑ‚ Ð¼Ð½Ð¾Ð¶ÐµÑÑ‚Ð²Ð¾ Ð´Ñ€ÑƒÐ³Ð¸Ñ… Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ†Ð¸Ð¹ Ð¸ Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ð¹ Ð¿Ð¾Ð´ Ð¾Ð´Ð½Ð¸Ð¼ Ñ„Ð»Ð°Ð³Ð¾Ð¼, Ð¿Ñ€ÐµÐ´Ð»Ð°Ð³Ð°Ñ ÐµÐ´Ð¸Ð½ÑƒÑŽ ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¸ Ð¸ ÑÐ°Ð¼Ñ‹Ð¹ ÑˆÐ¸Ñ€Ð¾ÐºÐ¸Ð¹ ÑÐ¿ÐµÐºÑ‚Ñ€ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÐµÐ¹.',
        "image": "q1.jpg"
    },
    "q2": {
        "question": "2. Ð§Ñ‚Ð¾ Ð¾Ð·Ð½Ð°Ñ‡Ð°ÐµÑ‚ Ð´ÐµÐ²Ð¸Ð· Â«Ð‘Ñ‹Ñ‚ÑŒ Ð¿ÐµÑ€Ð²Ñ‹Ð¼ â€“ Ð±Ñ‹Ñ‚ÑŒ Ð² Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ð¸!Â»?",
        "answer": "Ð­Ñ‚Ð¾ Ð¾Ð·Ð½Ð°Ñ‡Ð°ÐµÑ‚, Ñ‡Ñ‚Ð¾ Ð±Ñ‹Ñ‚ÑŒ Ð¿ÐµÑ€Ð²Ñ‹Ð¼ â€” ÑÑ‚Ð¾ Ð½Ðµ Ð¿Ñ€Ð¾ ÑÐ¾Ñ€ÐµÐ²Ð½Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ Ð´Ñ€ÑƒÐ³Ð¸Ð¼Ð¸, Ð° Ð¿Ñ€Ð¾ Ð°ÐºÑ‚Ð¸Ð²Ð½ÑƒÑŽ Ð¶Ð¸Ð·Ð½ÐµÐ½Ð½ÑƒÑŽ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸ÑŽ, Ð¿Ð¾ÑÑ‚Ð¾ÑÐ½Ð½Ð¾Ðµ Ñ€Ð°Ð·Ð²Ð¸Ñ‚Ð¸Ðµ, Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ðµ Ð²Ð¿ÐµÑ€Ñ‘Ð´ Ð¸ ÑƒÑ‡Ð°ÑÑ‚Ð¸Ðµ Ð² Ð¾Ð±Ñ‰ÐµÐ¼ Ð´ÐµÐ»Ðµ.",
        "image": "q2.jpg"
    },
    "q3": {
        "question": "3. ÐšÐ°ÐºÐ¾Ð²Ð° Ð³Ð»Ð°Ð²Ð½Ð°Ñ Ð¼Ð¸ÑÑÐ¸Ñ Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ñ?",
        "answer": "Ð“Ð»Ð°Ð²Ð½Ð°Ñ Ð¼Ð¸ÑÑÐ¸Ñ â€” ÑÐ¾Ð·Ð´Ð°Ð²Ð°Ñ‚ÑŒ ÑƒÑÐ»Ð¾Ð²Ð¸Ñ Ð´Ð»Ñ Ð²ÑÐµÑÑ‚Ð¾Ñ€Ð¾Ð½Ð½ÐµÐ³Ð¾ Ñ€Ð°Ð·Ð²Ð¸Ñ‚Ð¸Ñ Ð¸ ÑÐ°Ð¼Ð¾Ñ€ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð´ÐµÑ‚ÐµÐ¹ Ð¸ Ð¼Ð¾Ð»Ð¾Ð´Ñ‘Ð¶Ð¸, Ð²Ð¾ÑÐ¿Ð¸Ñ‚Ñ‹Ð²Ð°Ñ‚ÑŒ ÑÐ¾Ñ†Ð¸Ð°Ð»ÑŒÐ½Ð¾ Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ñ… Ð³Ñ€Ð°Ð¶Ð´Ð°Ð½ Ð½Ð° Ð¾ÑÐ½Ð¾Ð²Ðµ Ñ‚Ñ€Ð°Ð´Ð¸Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ñ… Ñ†ÐµÐ½Ð½Ð¾ÑÑ‚ÐµÐ¹.",
        "image": "q3.jpg"
    },
    "q4": {
        "question": "4. ÐšÑ‚Ð¾ Ð¼Ð¾Ð¶ÐµÑ‚ ÑÑ‚Ð°Ñ‚ÑŒ ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¾Ð¼? Ð•ÑÑ‚ÑŒ Ð»Ð¸ Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ Ð¿Ð¾ Ð²Ð¾Ð·Ñ€Ð°ÑÑ‚Ñƒ, Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÐ°Ð¼?",
        "answer": "Ð£Ñ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¾Ð¼ Ð¼Ð¾Ð¶ÐµÑ‚ ÑÑ‚Ð°Ñ‚ÑŒ Ð»ÑŽÐ±Ð¾Ð¹ Ð³Ñ€Ð°Ð¶Ð´Ð°Ð½Ð¸Ð½ Ð Ð¤ Ð² Ð²Ð¾Ð·Ñ€Ð°ÑÑ‚Ðµ Ð¾Ñ‚ 6 Ð´Ð¾ 18 Ð»ÐµÑ‚ Ð²ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ (ÑˆÐºÐ¾Ð»ÑŒÐ½Ð¸ÐºÐ¸, ÑÑ‚ÑƒÐ´ÐµÐ½Ñ‚Ñ‹ ÐºÐ¾Ð»Ð»ÐµÐ´Ð¶ÐµÐ¹). ÐÐ°ÑÑ‚Ð°Ð²Ð½Ð¸ÐºÐ¾Ð¼ Ð¼Ð¾Ð¶ÐµÑ‚ ÑÑ‚Ð°Ñ‚ÑŒ Ð»ÑŽÐ±Ð¾Ð¹ ÑÐ¾Ð²ÐµÑ€ÑˆÐµÐ½Ð½Ð¾Ð»ÐµÑ‚Ð½Ð¸Ð¹ Ð³Ñ€Ð°Ð¶Ð´Ð°Ð½Ð¸Ð½. ÐžÐ³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ð¹ Ð¿Ð¾ Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÐ°Ð¼ Ð½ÐµÑ‚.",
        "image": "q4.jpg"
    },
    "q5": {
        "question": "5. ÐšÐ°Ðº Ð¾Ñ„Ð¸Ñ†Ð¸Ð°Ð»ÑŒÐ½Ð¾ Ð²ÑÑ‚ÑƒÐ¿Ð¸Ñ‚ÑŒ Ð² Â«Ð”Ð²Ð¸Ð¶ÐµÐ½Ð¸Ðµ Ð¿ÐµÑ€Ð²Ñ‹Ñ…Â»?",
        "answer": "ÐžÑ„Ð¸Ñ†Ð¸Ð°Ð»ÑŒÐ½Ð¾ Ð²ÑÑ‚ÑƒÐ¿Ð¸Ñ‚ÑŒ Ð¼Ð¾Ð¶Ð½Ð¾ Ñ‡ÐµÑ€ÐµÐ· Ð¾Ñ„Ð¸Ñ†Ð¸Ð°Ð»ÑŒÐ½Ñ‹Ð¹ ÑÐ°Ð¹Ñ‚ Ð±ÑƒÐ´ÑŒÐ²Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ð¸.Ñ€Ñ„ Ð¸Ð»Ð¸ Ð¿Ð¾Ð´Ð°Ð² Ð·Ð°ÑÐ²Ð»ÐµÐ½Ð¸Ðµ Ð² Ð±Ð»Ð¸Ð¶Ð°Ð¹ÑˆÐµÐ¼ Ð¿ÐµÑ€Ð²Ð¸Ñ‡Ð½Ð¾Ð¼ Ð¾Ñ‚Ð´ÐµÐ»ÐµÐ½Ð¸Ð¸ (Ñ‡Ð°ÑˆÐµ Ð²ÑÐµÐ³Ð¾ Ð² ÑÐ²Ð¾ÐµÐ¹ ÑˆÐºÐ¾Ð»Ðµ, ÐºÐ¾Ð»Ð»ÐµÐ´Ð¶Ðµ Ð¸Ð»Ð¸ ÑƒÑ‡Ñ€ÐµÐ¶Ð´ÐµÐ½Ð¸Ð¸ Ð´Ð¾Ð¿Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ð½Ð¸Ñ).",
        "image": "q5.jpg"
    },
    "q6": {
        "question": "6. ÐšÐ°Ðº Ð²Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð´ÐµÑÑ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸? ÐœÐ¾Ð¶Ð½Ð¾ Ð»Ð¸ Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ñ‚ÑŒ Ñ€Ð°Ð·Ð½Ñ‹Ðµ?",
        "answer": "Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¼Ð¾Ð¶Ð½Ð¾ Ð¿Ð¾ ÑÐ²Ð¾Ð¸Ð¼ Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÐ°Ð¼, Ñ‡ÐµÑ€ÐµÐ· ÑƒÑ‡Ð°ÑÑ‚Ð¸Ðµ Ð² Ñ€Ð°Ð·Ð½Ñ‹Ñ… Ð¼ÐµÑ€Ð¾Ð¿Ñ€Ð¸ÑÑ‚Ð¸ÑÑ…. Ð”Ð°, Ð¼Ð¾Ð¶Ð½Ð¾ Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ñ‚ÑŒ Ñ€Ð°Ð·Ð½Ñ‹Ðµ Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð¸ ÑÐ¾Ð²Ð¼ÐµÑ‰Ð°Ñ‚ÑŒ Ð¸Ñ….",
        "image": "q6.jpg"
    },
    "q7": {
        "question": "7. Ð¡ÐºÐ¾Ð»ÑŒÐºÐ¾ Ð²ÑÐµÐ³Ð¾ Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ð¹ Ð¸ ÐºÐ°ÐºÐ¸Ðµ Ð¾Ð½Ð¸? (ÐÐ°ÑƒÐºÐ° Ð¸ Ñ‚ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ð¸, ÐºÑƒÐ»ÑŒÑ‚ÑƒÑ€Ð° Ð¸ Ð¸ÑÐºÑƒÑÑÑ‚Ð²Ð¾, Ð²Ð¾Ð»Ð¾Ð½Ñ‚Ñ‘Ñ€ÑÑ‚Ð²Ð¾, ÑÐ¿Ð¾Ñ€Ñ‚, Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð¿Ð°Ð¼ÑÑ‚ÑŒ Ð¸ Ð´Ñ€.)?",
        "answer": "Ð’ÑÐµÐ³Ð¾ 12 Ð¾ÑÐ½Ð¾Ð²Ð½Ñ‹Ñ… Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ð¹. Ð¡Ñ€ÐµÐ´Ð¸ Ð½Ð¸Ñ…: Ð½Ð°ÑƒÐºÐ° Ð¸ Ñ‚ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ð¸, ÐºÑƒÐ»ÑŒÑ‚ÑƒÑ€Ð° Ð¸ Ð¸ÑÐºÑƒÑÑÑ‚Ð²Ð¾, Ð²Ð¾Ð»Ð¾Ð½Ñ‚Ñ‘Ñ€ÑÑ‚Ð²Ð¾, ÑÐ¿Ð¾Ñ€Ñ‚, Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð¿Ð°Ð¼ÑÑ‚ÑŒ, Ð¼ÐµÐ´Ð¸Ð°, Ñ‚Ñ€ÑƒÐ´ Ð¸ Ð¿Ñ€Ð¾Ñ„ÐµÑÑÐ¸Ñ, Ñ‚ÑƒÑ€Ð¸Ð·Ð¼, Ð—ÐžÐ–, Ð´Ð¸Ð¿Ð»Ð¾Ð¼Ð°Ñ‚Ð¸Ñ, Ð¿Ð°Ñ‚Ñ€Ð¸Ð¾Ñ‚Ð¸Ð·Ð¼, ÑÐºÐ¾Ð»Ð¾Ð³Ð¸Ñ.",
        "image": "q7.jpg"
    },
    "q8": {
        "question": "8. ÐšÐ°Ðº Ð¿Ð¾Ð¿Ð°ÑÑ‚ÑŒ Ð½Ð° Ð²ÑÐµÑ€Ð¾ÑÑÐ¸Ð¹ÑÐºÐ¸Ðµ Ð¸ Ð¼ÐµÐ¶Ð´ÑƒÐ½Ð°Ñ€Ð¾Ð´Ð½Ñ‹Ðµ Ð¼ÐµÑ€Ð¾Ð¿Ñ€Ð¸ÑÑ‚Ð¸Ñ Ð¾Ñ‚ Ð”Ð²Ð¸Ð¶ÐµÐ½Ð¸Ñ? ÐÑƒÐ¶Ð½Ð¾ Ð»Ð¸ Ð´Ð»Ñ ÑÑ‚Ð¾Ð³Ð¾ Ð¸Ð¼ÐµÑ‚ÑŒ Ð´Ð¾ÑÑ‚Ð¸Ð¶ÐµÐ½Ð¸Ñ?",
        "answer": "ÐŸÐ¾Ð¿Ð°ÑÑ‚ÑŒ Ð¼Ð¾Ð¶Ð½Ð¾ Ñ‡ÐµÑ€ÐµÐ· Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾Ðµ ÑƒÑ‡Ð°ÑÑ‚Ð¸Ðµ Ð² Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°Ñ… Ð¸ Ð¾Ñ‚Ð±Ð¾Ñ€ Ð½Ð° ÐºÐ¾Ð½ÐºÑƒÑ€ÑÐ½Ð¾Ð¹ Ð¾ÑÐ½Ð¾Ð²Ðµ. ÐÐ°Ð»Ð¸Ñ‡Ð¸Ðµ Ð´Ð¾ÑÑ‚Ð¸Ð¶ÐµÐ½Ð¸Ð¹ Ð¸ Ð°ÐºÑ‚Ð¸Ð²Ð½Ð°Ñ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ñ Ð·Ð½Ð°Ñ‡Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ð¿Ð¾Ð²Ñ‹ÑˆÐ°ÑŽÑ‚ ÑˆÐ°Ð½ÑÑ‹, Ð½Ð¾ Ð½Ðµ Ð²ÑÐµÐ³Ð´Ð° ÑÐ²Ð»ÑÑŽÑ‚ÑÑ ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¼Ð¸ Ð´Ð»Ñ Ð²ÑÐµÑ… Ð¼ÐµÑ€Ð¾Ð¿Ñ€Ð¸ÑÑ‚Ð¸Ð¹.",
        "image": "q8.jpg"
    },
    "q9": {
        "question": "9. Ð•ÑÑ‚ÑŒ Ð»Ð¸ Ñƒ Ð”Ð²Ð¸Ð¶ÐµÐ½Ð¸Ñ ÑÐ²Ð¾Ñ‘ Ð¼ÐµÐ´Ð¸Ð° (Ð¶ÑƒÑ€Ð½Ð°Ð» Ð¸ Ñ‚. Ð´.)? ÐšÐ°Ðº Ñ‚ÑƒÐ´Ð° Ð¿Ð¾Ð¿Ð°ÑÑ‚ÑŒ?",
        "answer": "Ð”Ð°, ÐµÑÑ‚ÑŒ. Ð­Ñ‚Ð¾ Ð¼ÐµÐ´Ð¸Ð°Ñ†ÐµÐ½Ñ‚Ñ€Ñ‹ Ð¸ Ð¿Ð»Ð°Ñ‚Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð”Ð²Ð¸Ð¶ÐµÐ½Ð¸Ñ. ÐŸÐ¾Ð¿Ð°ÑÑ‚ÑŒ Ñ‚ÑƒÐ´Ð° Ð¼Ð¾Ð¶Ð½Ð¾, Ð¿Ñ€Ð¾ÑÐ²Ð¸Ð² ÑÐµÐ±Ñ Ð² Ð¼ÐµÑÑ‚Ð½Ð¾Ð¼ Ð¾Ñ‚Ð´ÐµÐ»ÐµÐ½Ð¸Ð¸, ÑƒÑ‡Ð°ÑÑ‚Ð²ÑƒÑ Ð² Ð¼ÐµÐ´Ð¸Ð°Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°Ñ… Ð¸Ð»Ð¸ Ñ‡ÐµÑ€ÐµÐ· Ð¾Ñ‚Ð±Ð¾Ñ€, Ð¾ ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¼ Ð¾Ð±ÑŠÑÐ²Ð»ÑÑŽÑ‚ Ð² ÑÐ¾Ð¾Ð±Ñ‰ÐµÑÑ‚Ð²Ð°Ñ… Ð”Ð²Ð¸Ð¶ÐµÐ½Ð¸Ñ.",
        "image": "q9.jpg"
    },
    "q10": {
        "question": "10. ÐšÐ°Ðº ÑÑ‚Ð°Ñ‚ÑŒ Ð½Ð°ÑÑ‚Ð°Ð²Ð½Ð¸ÐºÐ¾Ð¼ Ð´Ð»Ñ Ð¼Ð»Ð°Ð´ÑˆÐ¸Ñ… ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¾Ð²?",
        "answer": "Ð¡Ñ‚Ð°Ñ‚ÑŒ Ð½Ð°ÑÑ‚Ð°Ð²Ð½Ð¸ÐºÐ¾Ð¼ Ð¼Ð¾Ð¶Ð½Ð¾ Ñ 18 Ð»ÐµÑ‚, Ð¿Ð¾Ð´Ð°Ð² Ð·Ð°ÑÐ²ÐºÑƒ Ñ‡ÐµÑ€ÐµÐ· ÑÐ°Ð¹Ñ‚ Ð¸Ð»Ð¸ Ñ€ÐµÐ³Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð¾Ñ‚Ð´ÐµÐ»ÐµÐ½Ð¸Ðµ. Ð§Ð°ÑÑ‚Ð¾ Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ Ð¾Ð¿Ñ‹Ñ‚ Ð¿ÐµÐ´Ð°Ð³Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ð¹, Ð²Ð¾Ð¶Ð°Ñ‚ÑÐºÐ¾Ð¹ Ð¸Ð»Ð¸ Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ†Ð¸Ð¾Ð½Ð½Ð¾Ð¹ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ñ Ð¼Ð¾Ð»Ð¾Ð´Ñ‘Ð¶ÑŒÑŽ.",
        "image": "q10.jpg"
    },
    "q11": {
        "question": "11. Ð”Ð°Ñ‘Ñ‚ Ð»Ð¸ ÑƒÑ‡Ð°ÑÑ‚Ð¸Ðµ Ð² Ð”Ð²Ð¸Ð¶ÐµÐ½Ð¸Ð¸ Ð±Ð°Ð»Ð»Ñ‹ Ð¸Ð»Ð¸ Ð¿Ñ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð²Ð° Ð¿Ñ€Ð¸ Ð¿Ð¾ÑÑ‚ÑƒÐ¿Ð»ÐµÐ½Ð¸Ð¸ Ð² Ð²ÑƒÐ·Ñ‹?",
        "answer": "ÐŸÑ€ÑÐ¼Ñ‹Ñ… Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ð±Ð°Ð»Ð»Ð¾Ð² Ð½Ðµ Ð´Ð°Ñ‘Ñ‚. ÐžÐ´Ð½Ð°ÐºÐ¾ Ð¾Ð¿Ñ‹Ñ‚, Ð¿Ñ€Ð¾ÐµÐºÑ‚Ñ‹ Ð¸ Ð¿Ð¾Ð±ÐµÐ´Ñ‹ Ð² ÐºÐ¾Ð½ÐºÑƒÑ€ÑÐ°Ñ… Ñ„Ð¾Ñ€Ð¼Ð¸Ñ€ÑƒÑŽÑ‚ Ð¿Ð¾Ñ€Ñ‚Ñ„Ð¾Ð»Ð¸Ð¾, ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ðµ Ð¼Ð¾Ð¶ÐµÑ‚ ÑƒÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°Ñ‚ÑŒÑÑ ÐºÐ°Ðº Ð¸Ð½Ð´Ð¸Ð²Ð¸Ð´ÑƒÐ°Ð»ÑŒÐ½Ð¾Ðµ Ð´Ð¾ÑÑ‚Ð¸Ð¶ÐµÐ½Ð¸Ðµ. ÐÐµÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð²ÑƒÐ·Ñ‹-Ð¿Ð°Ñ€Ñ‚Ð½Ñ‘Ñ€Ñ‹ Ð¼Ð¾Ð³ÑƒÑ‚ Ð¿Ñ€ÐµÐ´ÑƒÑÐ¼Ð°Ñ‚Ñ€Ð¸Ð²Ð°Ñ‚ÑŒ Ð»ÑŒÐ³Ð¾Ñ‚Ñ‹.",
        "image": "q11.jpg"
    },
    "q12": {
        "question": "12. ÐšÐ°ÐºÐ¸Ð¼ Ð½Ð°Ð²Ñ‹ÐºÐ°Ð¼ Ð¼Ð¾Ð¶Ð½Ð¾ Ð½Ð°ÑƒÑ‡Ð¸Ñ‚ÑŒÑÑ Ð² Ð”Ð²Ð¸Ð¶ÐµÐ½Ð¸Ð¸? (ÐžÑ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð¼ÐµÑ€Ð¾Ð¿Ñ€Ð¸ÑÑ‚Ð¸Ð¹, Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð½Ð°Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ð°, Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ðµ Ð²Ñ‹ÑÑ‚ÑƒÐ¿Ð»ÐµÐ½Ð¸Ñ).",
        "answer": "ÐœÐ¾Ð¶Ð½Ð¾ Ð½Ð°ÑƒÑ‡Ð¸Ñ‚ÑŒÑÑ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð½Ð¾Ð¼Ñƒ Ð¼ÐµÐ½ÐµÐ´Ð¶Ð¼ÐµÐ½Ñ‚Ñƒ, Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð¼ÐµÑ€Ð¾Ð¿Ñ€Ð¸ÑÑ‚Ð¸Ð¹, Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ð¼ Ð²Ñ‹ÑÑ‚ÑƒÐ¿Ð»ÐµÐ½Ð¸ÑÐ¼, Ñ€Ð°Ð±Ð¾Ñ‚Ðµ Ð² ÐºÐ¾Ð¼Ð°Ð½Ð´Ðµ, Ð»Ð¸Ð´ÐµÑ€ÑÑ‚Ð²Ñƒ, Ð¾ÑÐ½Ð¾Ð²Ð°Ð¼ Ð¼ÐµÐ´Ð¸Ð°, ÑÐ¾Ñ†Ð¸Ð°Ð»ÑŒÐ½Ð¾Ð¼Ñƒ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸ÑŽ Ð¸ Ð¼Ð½Ð¾Ð³Ð¸Ð¼ Ð´Ñ€ÑƒÐ³Ð¸Ð¼ Ð¿Ñ€Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¼ Ð½Ð°Ð²Ñ‹ÐºÐ°Ð¼.",
        "image": "q12.jpg"
    },
    "q13": {
        "question": "13. Ð•ÑÑ‚ÑŒ Ð»Ð¸ Ñƒ Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ñ Ð¿Ð°Ñ€Ñ‚Ð½Ñ‘Ñ€Ñ‹ ÑÑ€ÐµÐ´Ð¸ ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸Ð¹ Ð¸ Ð²ÑƒÐ·Ð¾Ð², ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð¿Ñ€ÐµÐ´Ð»Ð°Ð³Ð°ÑŽÑ‚ ÑÑ‚Ð°Ð¶Ð¸Ñ€Ð¾Ð²ÐºÐ¸ Ð¸Ð»Ð¸ ÑÐºÑÐºÑƒÑ€ÑÐ¸Ð¸?",
        "answer": "Ð”Ð°, Ñƒ Ð”Ð²Ð¸Ð¶ÐµÐ½Ð¸Ñ Ð¼Ð½Ð¾Ð¶ÐµÑÑ‚Ð²Ð¾ Ð¿Ð°Ñ€Ñ‚Ð½Ñ‘Ñ€Ð¾Ð² â€” Ð²ÐµÐ´ÑƒÑ‰Ð¸Ðµ Ð²ÑƒÐ·Ñ‹, Ð³Ð¾ÑÑƒÐ´Ð°Ñ€ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ðµ ÐºÐ¾Ñ€Ð¿Ð¾Ñ€Ð°Ñ†Ð¸Ð¸ Ð¸ ÐºÑ€ÑƒÐ¿Ð½Ñ‹Ðµ ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸Ð¸. ÐžÐ½Ð¸ Ñ€ÐµÐ³ÑƒÐ»ÑÑ€Ð½Ð¾ Ð¿Ñ€ÐµÐ´Ð»Ð°Ð³Ð°ÑŽÑ‚ ÑÐºÑÐºÑƒÑ€ÑÐ¸Ð¸, ÑÑ‚Ð°Ð¶Ð¸Ñ€Ð¾Ð²ÐºÐ¸, Ð¼Ð°ÑÑ‚ÐµÑ€-ÐºÐ»Ð°ÑÑÑ‹ Ð¸ Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñ‹.",
        "image": "q13.jpg"
    },
    "q14": {
        "question": "14. Ð§Ñ‚Ð¾ Ñ‚Ð°ÐºÐ¾Ðµ Â«ÐŸÐµÑ€Ð²Ð¸Ñ‡Ð½Ð¾Ðµ Ð¾Ñ‚Ð´ÐµÐ»ÐµÐ½Ð¸ÐµÂ»? ÐšÐ°Ðº ÐµÐ³Ð¾ ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ Ð² Ð¼Ð¾ÐµÐ¹ ÑˆÐºÐ¾Ð»Ðµ/ÐºÐ¾Ð»Ð»ÐµÐ´Ð¶Ðµ/Ð´Ð²Ð¾Ñ€Ñ†Ðµ Ñ‚Ð²Ð¾Ñ€Ñ‡ÐµÑÑ‚Ð²Ð°, ÐµÑÐ»Ð¸ ÐµÐ³Ð¾ ÐµÑ‰Ñ‘ Ð½ÐµÑ‚?",
        "answer": '''"ÐŸÐµÑ€Ð²Ð¸Ñ‡Ð½Ð¾Ðµ Ð¾Ñ‚Ð´ÐµÐ»ÐµÐ½Ð¸Ðµ" â€” ÑÑ‚Ð¾ Ð¼ÐµÑÑ‚Ð½Ð¾Ðµ Ð¾Ñ‚Ð´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð”Ð²Ð¸Ð¶ÐµÐ½Ð¸Ñ Ð² ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ð¾Ð¹ Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ð¹ Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ†Ð¸Ð¸. Ð§Ñ‚Ð¾Ð±Ñ‹ ÐµÐ³Ð¾ ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ, Ð½ÑƒÐ¶Ð½Ð¾:
    1) Ð½Ð°Ð¹Ñ‚Ð¸ ÐºÑƒÑ€Ð°Ñ‚Ð¾Ñ€Ð° Ð¸Ð· Ñ‡Ð¸ÑÐ»Ð° Ð¿ÐµÐ´Ð°Ð³Ð¾Ð³Ð¾Ð²
    2) ÑÐ¾Ð±Ñ€Ð°Ñ‚ÑŒ Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ñ‚Ð¸Ð²Ð½ÑƒÑŽ Ð³Ñ€ÑƒÐ¿Ð¿Ñƒ ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¾Ð²
    3) Ð¾Ð±Ñ€Ð°Ñ‚Ð¸Ñ‚ÑŒÑÑ Ð² Ñ€ÐµÐ³Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð¾Ñ‚Ð´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð”Ð²Ð¸Ð¶ÐµÐ½Ð¸Ñ Ð·Ð° Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸ÐµÐ¹ Ð¸ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ Ð² Ð¾Ñ„Ð¾Ñ€Ð¼Ð»ÐµÐ½Ð¸Ð¸ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð².''',
        "image": "q14.jpg"
    },
    "find_us": {
        "question": "ÐÐ°Ð¹Ñ‚Ð¸ Ð½Ð°Ñ",
        "answer": (
            "ÐœÑ‹ Ð² ÑÐ¾Ñ†Ð¸Ð°Ð»ÑŒÐ½Ñ‹Ñ… ÑÐµÑ‚ÑÑ… Ð¸ Ð½Ð° Ð´Ñ€ÑƒÐ³Ð¸Ñ… Ñ€ÐµÑÑƒÑ€ÑÐ°Ñ…:\n\n"
            "ðŸŒ ÐžÑ„Ð¸Ñ†Ð¸Ð°Ð»ÑŒÐ½Ñ‹Ð¹ ÑÐ°Ð¹Ñ‚: https://Ð±ÑƒÐ´ÑŒÐ²Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ð¸.Ñ€Ñ„\n"
            "ðŸ“¹ Ð“Ñ€ÑƒÐ¿Ð¿Ð° Ð’ÐšÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ðµ ÐœÐ¢ÐšÐŸ: https://vk.com/mtkp_bmstu?from=groups\n"
            "ðŸ‘¥ Ð“Ñ€ÑƒÐ¿Ð¿Ð° Ð’ÐšÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ðµ ÐœÐ¢ÐšÐŸ Ð”Ð²Ð¸Ð¶ÐµÐ½Ð¸ÐµÐŸÐµÑ€Ð²Ñ‹Ñ…: https://vk.com/first_mtkp?from=groups\n"
            "ðŸ“± Telegram-ÐºÐ°Ð½Ð°Ð» ÐœÐ¢ÐšÐŸ: https://t.me/BMSTU_MTKP\n\n"
            "ÐŸÐ¾Ð´Ð¿Ð¸ÑÑ‹Ð²Ð°Ð¹ÑÑ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð±Ñ‹Ñ‚ÑŒ Ð² ÐºÑƒÑ€ÑÐµ Ð²ÑÐµÑ… ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹!"
        ),
        "image": "find_us.jpg"
    }
}


def make_keyboard():
    keyboard = []
    row = []
    for i, key in enumerate(QA_DATA.keys()):
        q_text = QA_DATA[key]["question"].split('?')[0][:30] + "..."
        if key == "find_us":
            q_text = QA_DATA[key]["question"]

        row.append(InlineKeyboardButton(q_text, callback_data=key))

        if len(row) == 2 or i == len(QA_DATA) - 1:
            keyboard.append(row)
            row = []

    return InlineKeyboardMarkup(keyboard)


async def start(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    user = update.effective_user
    welcome_text = (
        f"ÐŸÑ€Ð¸Ð²ÐµÑ‚, {user.first_name}! ðŸ‘‹\n"
        "Ð¯ â€” Ð´Ñ€ÑƒÐ¶ÐµÐ»ÑŽÐ±Ð½Ñ‹Ð¹ Ð±Ð¾Ñ‚ Â«Ð”Ð²Ð¸Ð¶ÐµÐ½Ð¸Ñ Ð¿ÐµÑ€Ð²Ñ‹Ñ… Ð¾Ñ‚ ÐœÐ¢ÐšÐŸ ÐœÐ“Ð¢Ð£ Ð¸Ð¼. Ð.Ð­. Ð‘Ð°ÑƒÐ¼Ð°Ð½Ð°Â».\n\n"
        "Ð’Ñ‹Ð±ÐµÑ€Ð¸ Ð²Ð¾Ð¿Ñ€Ð¾Ñ, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ñ‚ÐµÐ±Ñ Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÑƒÐµÑ‚, Ð¸ Ñ Ð¾Ñ‚Ð²ÐµÑ‡Ñƒ Ð½Ð° Ð½ÐµÐ³Ð¾ Ð¿Ð¾Ð´Ñ€Ð¾Ð±Ð½ÐµÐµ!"
    )

    welcome_image_path = os.path.join(IMAGES_FOLDER, "q15.jpg")

    try:
        if os.path.exists(welcome_image_path):
            with open(welcome_image_path, 'rb') as photo:
                await update.message.reply_photo(
                    photo=photo,
                    caption=welcome_text,
                    reply_markup=make_keyboard()
                )
        else:
            logger.warning(f"ÐŸÑ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²ÐµÐ½Ð½Ð°Ñ ÐºÐ°Ñ€Ñ‚Ð¸Ð½ÐºÐ° {welcome_image_path} Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ð°!")
            await update.message.reply_text(
                welcome_text,
                reply_markup=make_keyboard()
            )
    except Exception as e:
        logger.error(f"ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐµ Ð¿Ñ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²ÐµÐ½Ð½Ð¾Ð¹ ÐºÐ°Ñ€Ñ‚Ð¸Ð½ÐºÐ¸: {e}")
        await update.message.reply_text(
            welcome_text,
            reply_markup=make_keyboard()
        )


async def button_handler(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    query = update.callback_query
    await query.answer()

    data = query.data
    if data in QA_DATA:
        response = f"â“ {QA_DATA[data]['question']}\n\n"
        response += f"ðŸ’¡ {QA_DATA[data]['answer']}"

        image_filename = QA_DATA[data].get("image")

        if image_filename:
            image_path = os.path.join(IMAGES_FOLDER, image_filename)

            if os.path.exists(image_path):
                with open(image_path, 'rb') as photo:
                    await query.message.reply_photo(
                        photo=photo,
                        caption=response,
                        reply_markup=make_keyboard()
                    )
                await query.message.delete()
                return
            else:
                logger.warning(f"Ð¤Ð°Ð¹Ð» {image_path} Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½!")
                response += "\n\nâš ï¸ Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾ Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾"

        await query.edit_message_text(
            text=response,
            reply_markup=make_keyboard()
        )


def main() -> None:
    TOKEN = "8249571888:AAFeRh1kUBN3dJitaYGT14KMwUqzeM9iS3Y"

    application = Application.builder().token(TOKEN).build()

    application.add_handler(CommandHandler("start", start))
    application.add_handler(CallbackQueryHandler(button_handler))

    application.run_polling(allowed_updates=Update.ALL_TYPES)


if __name__ == "__main__":
    main()